"use strict";angular.module("musicResources",["ngResource"]).factory("youtubeRelated",["$resource",function(a){return a("https://gdata.youtube.com/feeds/api/videos/:id/related?v=2&max-results=50&alt=json&callback=JSON_CALLBACK",{},{query:{method:"JSONP",cache:!1}})}]).factory("youtubeSearch",["$resource",function(a){return a("http://gdata.youtube.com/feeds/api/videos?q=:q&v=2&start-index=1&max-results=50&alt=json&callback=JSON_CALLBACK",{},{query:{method:"JSONP",cache:!1}})}]).factory("lastfmSimilar",["$resource",function(a){return a("http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=:artist&api_key=4c9a840aeb98791ab0363400efd984ac&format=json&callback=JSON_CALLBACK",{},{query:{method:"JSONP",cache:!1}})}]),angular.module("pxhjckDirectives",[]).directive("burnAutofocus",function(){return{restrict:"A",link:function(a,b){b[0].focus()}}}).directive("modalDialog",function(){return{restrict:"A",scope:{show:"="},replace:!0,transclude:!0,link:function(a,b,c){a.dialogStyle={},c.width&&(a.dialogStyle.width=c.width),c.height&&(a.dialogStyle.height=c.height),a.hideModal=function(){a.show=void 0==c.closable?!1:"true"===c.closable?!1:!0}},template:"<div class='ng-modal' ng-show='show'><div class='ng-modal-overlay' ng-click='hideModal()'></div><div class='ng-modal-dialog' ng-style='dialogStyle'><div class='ng-modal-close' ng-click='hideModal()'>X</div><div class='ng-modal-dialog-content' ng-transclude></div></div></div>"}}),angular.module("youtubeRadio",["ngCookies","ngResource","ngSanitize","ngRoute","pxhjckDirectives","musicResources"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:videoid",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("youtubeRadio").controller("MainCtrl",["$scope","youtubeRelated","youtubeSearch","lastfmSimilar","$q","$http","$route",function(a,b,c,d,e,f,g){function h(a,c){var d=b.query({id:a}),e=[];d.$promise.then(function(a){angular.forEach(a.feed.entry,function(a){this.push({artist:a.title.$t.split(" - ")[0],title:a.title.$t.split(" - ")[1]||"",videoid:a.link[1].href.split("/")[a.link[1].href.split("/").length-2]})},e),c&&"function"==typeof c&&c.call(this,e)})}function i(a,b){var d=c.query({q:a}),e=[];d.$promise.then(function(a){angular.forEach(a.feed.entry,function(a){this.push({artist:a.title.$t.split(" - ")[0],title:a.title.$t.split(" - ")[1],videoid:a.link[1].href.split("/")[a.link[1].href.split("/").length-2]})},e),b&&"function"==typeof b&&b.call(this,e)})}function j(a,b){var c=d.query({artist:a}),e=[];c.$promise.then(function(a){angular.forEach(a.similarartists.artist,function(a){this.push({artist:a.name,image:a.image[2]["#text"]})},e),b&&"function"==typeof b&&b.call(this,e)})}function k(a){document.getElementById("player").src=a}function l(a,b){for(var c=[],b=b||a[0].videoid,d=0,e=a.length;e>d;d++)c.push(a[d].videoid);k("http://www.youtube.com/embed/"+b+"?autoplay=1&playlist="+c.join(","))}function m(a,b){a.push.apply(a,b)}function n(a,b){a.length=0,a.push.apply(a,b)}function o(a,b){var c=[];h(a,function(a){h(a[0].videoid,function(d){m(c,d),h(a[1].videoid,function(d){m(c,d),h(a[2].videoid,function(a){m(c,a),p(c),b(c)})})})})}function p(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a}a.suggested=[],a.similar=[],a.playlist=[],a.searchYoutube=function(b){i(b,function(b){n(a.suggested,b)}),j(b,function(b){n(a.similar,b)})};!function(){var b="",c=["79YDgv_zWA4","4N31oFeinFY","hT_nvWreIhg","dR3ccmWmLhk","gtOV7bp-gys","4L0YW0tqd_4","Jj-_addP19M","6nQCxwneUwA","yVDuJBBr-Oc","eUMwFaXTM3s","j5dFe-WKuPs","oNtFcXqG4w8","3Y_Op6yqpeU","JzAektg101M","6rgStv12dwA","6t7EvaWIOn8","3WmK19dXRZc","PSSpFI-rhL0","Py5AKfC5kV4","3Hc0SL76UGo","wycjnCCgUes","J43T8rEOg-I","91FiJsPOQTs","MuZhnNR6vzc","RNuUgbUzM8U","IKTJoHbKZO0","FemwJXl4rLA","thag2Hlos6E","Pib8eYDSFEI","ZNeXVSt8E80","EBAzlNJonO8","zq7chp71sRo","GozvYidSMqg","X_bFO1SNRZg","lmc21V-zBq0","rVeMiVU77wo","HIfFA8-RaHQ","LEtlbQnfhxU","RF0HhrwIwp0","9PnOG67flRA","1p-qilKyOmo","numCZoBFcv4","vI2HOKQ9QnA","kqjeNSNuNPM","CJXAxlj1-Z8","-aW7NFSGklM","v33r88NXK-8","qRs0MrfDhmw","x4yxoHwNzEE"];g.current.params.videoid?b=g.current.params.videoid:(b=p(c)[0],console.log("initVideo",b)),o(b,function(c){n(a.playlist,c),l(a.playlist,b),console.log("init:data[0].artist",c[0].artist),j(c[0].artist,function(b){n(a.similar,b)})})}()}]);